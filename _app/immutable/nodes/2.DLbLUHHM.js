import{f as h,e as D,a as y,s as I}from"../chunks/CYntuL02.js";import"../chunks/MKJv5q84.js";import{p as it,t as K,g as t,a as st,s,c as l,r as d,m as p,b as n}from"../chunks/dhKN8zhu.js";import{i as J}from"../chunks/B8CupUDX.js";import{r as x}from"../chunks/16NvfST4.js";import{s as M}from"../chunks/Cw3zGvpU.js";import{b as _}from"../chunks/5X1FFu99.js";import{p as nt}from"../chunks/CdEA5IGF.js";import{i as lt}from"../chunks/B4nHfwlT.js";import{g as Q}from"../chunks/Bk80jZTk.js";var dt=h('<div><label class="block text-sm mb-1">Username</label> <input type="text" required class="w-full rounded-lg bg-gray-800 border border-gray-700 px-3 py-2"/></div>'),ut=h('<div><label class="block text-sm mb-1">Confirm password</label> <input type="password" required class="w-full rounded-lg bg-gray-800 border border-gray-700 px-3 py-2"/></div>'),pt=h('<p class="text-sm text-red-400 text-center"> </p>'),ct=h('<div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-600 to-purple-600"><div class="w-full max-w-md rounded-2xl bg-gray-900 p-8 shadow-2xl text-gray-100"><div class="mb-6 flex rounded-xl bg-gray-800 p-1"><button type="button">Login</button> <button type="button">Register</button></div> <form class="space-y-4"><div><label class="block text-sm mb-1">Email</label> <input type="email" required class="w-full rounded-lg bg-gray-800 border border-gray-700 px-3 py-2"/></div> <!> <div><label class="block text-sm mb-1">Password</label> <input type="password" required class="w-full rounded-lg bg-gray-800 border border-gray-700 px-3 py-2"/></div> <!> <!> <button type="submit" class="w-full rounded-xl bg-indigo-600 py-2 font-semibold disabled:opacity-60"> </button></form></div></div>');function kt(V,W){it(W,!1);var X=this&&this.__awaiter||function(e,r,o,i){function b(m){return m instanceof o?m:new o(function(v){v(m)})}return new(o||(o=Promise))(function(m,v){function at(u){try{T(i.next(u))}catch(A){v(A)}}function ot(u){try{T(i.throw(u))}catch(A){v(A)}}function T(u){u.done?m(u.value):b(u.value).then(at,ot)}T((i=i.apply(e,r||[])).next())})};let a=p("login"),w=p(""),k=p(""),g=p(""),q=p(""),c=p(""),f=p(!1);function Y(){return X(this,void 0,void 0,function*(){var e;if(n(c,""),t(a)==="register"&&t(g)!==t(q)){n(c,"Passwords do not match");return}n(f,!0);try{const r=t(a)==="login"?"http://localhost:3011/auth/login":"http://localhost:3011/auth/register",o={email:t(w),password:t(g)};t(a)==="register"&&(o.username=t(k));const i=yield fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),b=yield i.json();if(!i.ok)throw new Error((e=b.message)!==null&&e!==void 0?e:"Authentication failed");t(a)==="login"?(document.cookie=`auth_token=${b.auth_token}; path=/; max-age=86400`,Q("/schatkaart")):Q("/schatkaart")}catch(r){n(c,r instanceof Error?r.message:"Something went wrong")}finally{n(f,!1)}})}lt();var j=ct(),N=l(j),C=l(N),E=l(C);let R;var U=s(E,2);let $;d(C);var P=s(C,2),S=l(P),z=s(l(S),2);x(z),d(S);var B=s(S,2);{var Z=e=>{var r=dt(),o=s(l(r),2);x(o),d(r),_(o,()=>t(k),i=>n(k,i)),y(e,r)};J(B,e=>{t(a)==="register"&&e(Z)})}var L=s(B,2),F=s(l(L),2);x(F),d(L);var G=s(L,2);{var tt=e=>{var r=ut(),o=s(l(r),2);x(o),d(r),_(o,()=>t(q),i=>n(q,i)),y(e,r)};J(G,e=>{t(a)==="register"&&e(tt)})}var H=s(G,2);{var et=e=>{var r=pt(),o=l(r,!0);d(r),K(()=>I(o,t(c))),y(e,r)};J(H,e=>{t(c)&&e(et)})}var O=s(H,2),rt=l(O,!0);d(O),d(P),d(N),d(j),K(()=>{R=M(E,1,"flex-1 rounded-lg py-2 text-sm font-semibold transition",null,R,{"bg-indigo-600":t(a)==="login","text-white":t(a)==="login","text-gray-400":t(a)!=="login"}),$=M(U,1,"flex-1 rounded-lg py-2 text-sm font-semibold transition",null,$,{"bg-indigo-600":t(a)==="register","text-white":t(a)==="register","text-gray-400":t(a)!=="register"}),O.disabled=t(f),I(rt,t(f)?"Please wait...":t(a)==="login"?"Login":"Create account")}),D("click",E,()=>n(a,"login")),D("click",U,()=>n(a,"register")),_(z,()=>t(w),e=>n(w,e)),_(F,()=>t(g),e=>n(g,e)),D("submit",P,nt(Y)),y(V,j),st()}export{kt as component};
